<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pokémon Search App</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-wdith, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6fb;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
          }
          
          main {
            width: 90%;
            max-width: 600px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
          }
          
          #main-header {
            color: #ff4757;
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 20px;
          }
          
          #input-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
          }
          
          #input-label {
            font-weight: bold;
            color: #333;
          }
          
          #search-input {
            padding: 10px;
            width: 60%;
            border-radius: 5px;
            border: 1px solid #ccc;
          }
          
          #search-button {
            padding: 10px 15px;
            background-color: #ff4757;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
          }
          
          #search-button:hover {
            background-color: #e84343;
          }
          
          #name-container, #height-weight-container, #types-container {
            margin: 10px 0;
            font-size: 1.2em;
            color: #333;
          }
          
          #sprite-container img {
            max-width: 100px;
            margin: 15px 0;
          }
          
          #stats-container table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
          }
          
          #stats-container caption {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
          }
          
          #stats-container td {
            padding: 10px;
            font-size: 1em;
            color: #555;
          }
          
          #stats-container tr:nth-child(odd) {
            background-color: #f9f9f9;
          }
          
          #stats-container tr:nth-child(even) {
            background-color: #e9e9e9;
          }
          
          #stats-container td:first-child {
            font-weight: bold;
            color: #333;
          }    
    </style>
  </head>
  <body>
    <main>
      <h1 id="main-header">Pokémon Search App</h1>
      <div id="input-container">
        <label id="input-label" for="input">
          Search Pokémon name or Pokédex #:
        </label>
        <input id="search-input" type="text" required>
        <button id="search-button" type="submit">
          Find
        </button>
      </div>
      <div id="name-container">
        <span id="pokemon-name">
          Pokémon:
        </span>
        <span>
          Pokédex #: 
          <span id="pokemon-id">
          </span>
        </span>
      </div>
      <div id="height-weight-container">
        <span>
          Height:
          <span id="height">
          </span>
        </span>
        <span>
          Weight:
          <span id="weight">
          </span>
        </span>
      </div>
      <div id="sprites-container">
      </div>
      <div id="types-container">
        <span id="types">
        </span>
      </div>
      <div id="stats-container">
        <table>
          <caption>Base Stats</caption>
          <tbody>
            <tr>
              <td id="hp-label">
                HP
              </td>
              <td id="hp">
              </td>
            </tr>
            <tr>
              <td id="attack-label">
                Attack
              </td>
              <td id="attack">
              </td>
            </tr>
            <tr>
              <td id="defense-label">
                Defense
              </td>
              <td id="defense">
              </td>
            </tr>
            <tr>
              <td id="special-attack-label">
                Special Attack
              </td>
              <td id="special-attack">
              </td>
            </tr>
            <tr>
              <td id="special-defense-label">
                Special Defense
              </td>
              <td id="special-defense">
              </td>
            </tr>
            <tr>
              <td id="speed-label">
                Speed
              </td>
              <td id="speed">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
    <script>
        const input = document.getElementById("search-input");
        const button = document.getElementById("search-button");
        const pokemonData = "https://pokeapi-proxy.freecodecamp.rocks/api/pokemon"
        const pokemonName = document.getElementById("pokemon-name");
        const pokemonId = document.getElementById("pokemon-id");
        const pokemonTypes = document.getElementById("types");
        const pokemonHeight = document.getElementById("height");
        const pokemonWeight = document.getElementById("weight");
        const spritesContainer = document.getElementById("sprites-container");
        const pokemonStats = ["hp", "attack", "defense", "special-attack", "special-defense", "speed"];

        const fetchData = async (identifier) => {
            try {
            const res = await fetch(`${pokemonData}/${identifier}`);
            const data = await res.json();  
            showPokemonData(data);
            } catch (err) {
            if (err) {
                alert("Pokémon not found")
            };
            }
        };

        const showPokemonData = (data) => {
        const {height, id, name, sprites, stats, types, weight} = data;
        pokemonName.innerText = name.toUpperCase()
        pokemonId.innerText = id;
        pokemonHeight.innerText = height;
        pokemonWeight.innerText = weight;
        spritesContainer.innerHTML = 
            `<img id="sprite" src="${sprites.front_default}" alt="pokemon-sprite">`;
        for (let i = 0; i < pokemonStats.length; i++) {
            const statIndex = stats.findIndex((statEntry) => statEntry.stat.name === pokemonStats[i]);
            const statElement = document.getElementById(`${pokemonStats[i]}`)
            statElement.innerText = stats[statIndex].base_stat
        }
        const {slot, type} = types;
        for (let i = 0; i < types.length; i++) {
            if (pokemonTypes.innerText === "") {
            pokemonTypes.innerHTML = `<span>${types[i].type.name.toUpperCase()}</span>`
            } else {
            pokemonTypes.innerHTML += `<span> ${types[i].type.name.toUpperCase()}</span>`
            }
        }


        }

        button.addEventListener("click", () => {
        pokemonTypes.innerText = "";
        const pokemon = input.value.toLowerCase()
        fetchData(pokemon);
        })
    </script>
  </body>
</html>